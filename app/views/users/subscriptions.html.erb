<div class="page-section flexbox vertical stretch">
    <div class="section-inner flexbox vertical stretch">

    <%# displays information regarding all subscription plan options for users. #%>

        <div class="section-title">
            <h2> Subscription Plans </h2>
        </div>


        <% flash.each do |type, msg| %>
            <div class='alert'>
              <%= msg %>
            </div>
        <% end %>

        <div>
            <% @rental = Rental.find_by(user: @user, end_station: nil) %>
            <% @user = User.find_by(email: session[:email]) %>
        </div>
        <div class="home-card">
            <div>
                <h3>Monthly Membership</h3>
                <p>- Low-commitment</p>
                <p>- Month-to-month subscription fee</p>
                <p>- Unlimited rides</p>
                <p>- No overage fees</p>
                <p>- Up to four bikes per user</p>
                <br>
                <h3>$19.13</h3>
                <% @rental = Rental.find_by(user: @user, end_station: nil) %>
                <% @user = User.find_by(email: session[:email]) %>
                <% if !!@rental %>
                    <p> You cannot subscribe while a rental is active. Please <a href="/current_ride" style = "color: var(--light-text-color)"> return your bike(s)</a> before proceeding. </p>
                <% elsif !!@user and !!@user.sub_id %>
                    <p> You are already subscribed. </p>
                <% else %>
                    <%= form_with url: subscribe_path, remote: true, method: 'post' do |form| %>
                        <%= hidden_field_tag(:price, "price_1Mzr9uDRwtZV86UmtOiQFnzq") %>
                        <%= form.submit "Monthly", class: "button" %>
                    <% end %>
                <% end %>
            </div>
        </div>
        <div class="home-card">
            <div>
                <h3>Yearly Membership</h3>
                <p>- Higher-commitment</p>
                <p>- Annual subscription fee</p>
                <p>- Unlimited rides</p>
                <p>- No overage fees</p>
                <p>- Up to four bikes per user</p>
                <br>
                <h3>$76.50</h3>
                <% @rental = Rental.find_by(user: @user, end_station: nil) %>
                <% @user = User.find_by(email: session[:email]) %>
                <% if !!@rental %>
                    <p> You cannot subscribe while a rental is active. Please <a href="/current_ride" style = "color: var(--light-text-color)"> return your bike(s)</a> before proceeding. </p>
                <% elsif !!@user and !!@user.sub_id %>
                    <p> You are already subscribed. </p>
                <% else %>
                    <%= form_with url: subscribe_path, remote: true, method: 'post' do |form| %>
                        <%= hidden_field_tag(:price, "price_1MzrAjDRwtZV86UmAainx1pb") %>
                        <%= form.submit "Annual", class: "button" %>
                    <% end %>
                <% end %>
            </div>
        </div>
    </div>
</div>
